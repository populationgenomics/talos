// all outputs which are not specific to a cohort/family/analysis

params.processed_annotations = "nextflow/processed_annotations"
outputDir = "${params.processed_annotations}"
workflow.output.mode = 'copy'

// input directory for chunky downloads
params.large_files = "large_files"

// download links
params.dl_alphamissense = "https://zenodo.org/records/8208688/files/AlphaMissense_hg38.tsv.gz?download=1"
params.dl_g2p = "https://github.com/obophenotype/human-phenotype-ontology/releases/download/v2026-01-08/genes_to_phenotype.txt"
params.dl_gff3 = "https://ftp.ensembl.org/pub/release-116/gff3/homo_sapiens/Homo_sapiens.GRCh38.116.gff3.gz"
params.dl_mane = "https://ftp.ncbi.nlm.nih.gov/refseq/MANE/MANE_human/release_1.5/MANE.GRCh38.v1.5.summary.txt.gz"
params.dl_obo = "https://github.com/obophenotype/human-phenotype-ontology/releases/download/v2026-01-08/hp.obo"
params.dl_ref_genome_38 = "https://hgdownload.soe.ucsc.edu/goldenPath/hg38/bigZips/hg38.fa.gz"
params.dl_submission_summary = "https://ftp.ncbi.nlm.nih.gov/pub/clinvar/tab_delimited/submission_summary.txt.gz"
params.dl_variant_summary = "https://ftp.ncbi.nlm.nih.gov/pub/clinvar/tab_delimited/variant_summary.txt.gz"

// MANE transcript resource
params.mane = "${params.large_files}/MANE.GRCh38.v1.5.summary.txt.gz"
// result file from running ParseManeIntoJson on the MANE summary file
params.mane_json = "${params.processed_annotations}/mane.json"

// Ensembl gene feature file
params.ensembl_gff = "${params.large_files}/Homo_sapiens.GRCh38.116.gff3.gz"
// result files from the CreateRoiFromGff3 nextflow module, implementing the CreateRoiFromGff3 script followed by a sort
params.ensembl_bed = "${params.processed_annotations}/GRCh38.bed"
params.ensembl_merged_bed = "${params.processed_annotations}/GRCh38_merged.bed"

params.ref_genome = "${params.large_files}/ref.fa"

// AlphaMissense files, downloadable from https://zenodo.org/records/8208688/files/AlphaMissense_hg38.tsv.gz
// or Google Cloud https://console.cloud.google.com/storage/browser/dm_alphamissense
params.alphamissense_tsv = "${params.large_files}/AlphaMissense_hg38.tsv.gz"

// AlphaMissense annotations reformatted as an echtvar-compatible zip
params.alphamissense_zip = "${params.processed_annotations}/alphamissense.zip"

// this should be a space-delimited list of sites to ignore in the raw clinvar data
// the names must be formatted exactly as they appear in the clinvar records
params.clinvar_blacklist = "'not' 'applicable'"

// Docker image - built from Dockerfile in the root directory
// "docker build -t talos:9.0.1 ."
params.container = 'talos:9.0.1'
docker.enabled = true

process {
    memory = 8.GB
    cpus = 2
    withName: 'CreateRoiFromGff3' {
        memory = '2 GB'
        cpus = 1
    }
    withName: 'DownloadClinVarFiles' {
        memory = '2 GB'
    }
    withName: 'EncodeAlphaMissense' {
        memory = '16 GB'
    }
    withName: 'ParseAlphaMissense' {
        memory = '2 GB'
        cpus = 4
    }
}
